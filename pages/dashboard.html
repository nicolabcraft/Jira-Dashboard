<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de bord</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/modele.css">
    <link rel="stylesheet" href="../assets/css/sidebar.css">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="icon" href="../assets/img/favicon.png">
    <script>
        window.API_BASE = 'http://127.0.0.1:5000';
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../assets/js/dashboard.js" defer></script>
    <script src="../assets/js/script.js" defer></script>
    <script src="../assets/js/overlay.js" defer></script>
    <script src="../assets/js/sidebar.js" defer></script>
</head>
<body>
<div class="layout">
    <nav class="sidebar close">
        <header>
            <div class="image-text">
                <span class="image">
                    <img src="../assets/img/logo-large.png" alt="Logo">
                </span>
                <div class="text logo-text">
                    <span class="name">Jira Dashboard</span>
                    <span class="profession">Admin</span>
                </div>
            </div>
            <i class='bx bx-chevron-right toggle'></i>
        </header>
        <div class="menu-bar">
            <div class="menu">
                <li class="search-box">
                    <i class='bx bx-search icon'></i>
                    <input type="text" placeholder="Search...">
                </li>
                <ul class="menu-links">
                    <li class="nav-link"><a href="dashboard.html"><i class='bx bx-home-alt icon'></i><span class="text nav-text">Dashboard</span></a></li>
                    <li class="nav-link"><a href="tickets.html"><i class='bx bx-bar-chart-alt-2 icon'></i><span class="text nav-text">Tickets</span></a></li>
                    <li class="nav-link"><a href="rapports.html"><i class='bx bx-pie-chart-alt icon'></i><span class="text nav-text">Rapports</span></a></li>
                    <li class="nav-link"><a href="users.html"><i class='bx bx-user icon'></i><span class="text nav-text">Utilisateurs</span></a></li>
                </ul>
            </div>
            <div class="bottom-content">
                <li><a href="#" id="logout-btn"><i class='bx bx-log-out icon'></i><span class="text nav-text">Logout</span></a></li>
                <li class="mode">
                    <div class="sun-moon">
                        <i class='bx bx-moon icon moon'></i>
                        <i class='bx bx-sun icon sun'></i>
                    </div>
                    <span class="mode-text text">Dark mode</span>
                    <div class="toggle-switch"><span class="switch"></span></div>
                </li>
            </div>
        </div>
    </nav>
    <main class="main">
        <div class="dashboard-title">Vue d'ensemble - Jira</div>
        <div class="dashboard-row">
            <div class="card">
                <div style="display:flex;align-items:center;justify-content:space-between;width:100%;">
                    <div style="flex:1;text-align:center;">
                        <h2>Nombre de tickets</h2>
                        <div class="kpi" id="kpi-total">...</div>
                    </div>
                    <div style="width:1px;height:60px;background:#e8eef6;"></div>
                    <div style="flex:1;text-align:center;">
                        <h2>Tickets r√©solus</h2>
                        <div class="kpi" id="kpi-resolved">...</div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div style="display:flex;align-items:center;justify-content:space-between;width:100%;">
                    <div style="flex:1;text-align:center;">
                        <h2>Relance Envoy√©e</h2>
                        <div class="kpi" id="kpi-relaunched">...</div>
                        <div style="font-size:0.9em;display:flex;align-items:center;justify-content:center;gap:4px;">
                            <img src="../assets/img/up.svg" alt="Relance Envoy√©e" style="width:16px;height:16px;"/>
                            <span>Relance Envoy√©e</span>
                        </div>
                    </div>
                    <div style="width:1px;height:60px;background:#e8eef6;"></div>
                    <div style="flex:1;text-align:center;">
                        <h2>Ticket Cl√¥tur√©</h2>
                        <div class="kpi" id="kpi-closed">...</div>
                        <div style="font-size:0.9em;display:flex;align-items:center;justify-content:center;gap:4px;">
                            <img src="../assets/img/down.svg" alt="Ticket Cl√¥tur√©" style="width:16px;height:16px;"/>
                            <span>Ticket Cl√¥tur√©</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <h2>Sant√© du support</h2>
                <div class="support-health-container">
                    <div class="weather-row" id="weather-row">
                        <span class="weather-icon" data-index="0">‚òÄÔ∏è</span>
                        <span class="weather-icon" data-index="1">‚òÅÔ∏è</span>
                        <span class="weather-icon" data-index="2">üåßÔ∏è</span>
                        <span class="weather-icon" data-index="3">‚õàÔ∏è</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="dashboard-row">
            <div class="card card-full-height">                <h2>Tickets cr√©√©s vs r√©solus (30 jours)</h2>
                <canvas id="chart-created-resolved" style="width:100%;height:160px;background:#e8eef6;border-radius:8px;"></canvas>
            </div>
            <div class="card">
                <h2>Tickets par statut (30 jours)</h2>
                <canvas id="chart-status" style="width:100%;height:160px;background:#e8eef6;border-radius:8px;"></canvas>
            </div>
            <div class="card">
                <h2>Charge de travail (30 jours)</h2>
                <div class="team-list" id="leaderboard">
                    <!-- JS -->
                </div>
            </div>
        </div>
        <div class="dashboard-row">
            <div class="card">
                <h2>Tickets par p√¥le (30 jours)</h2>
                <canvas id="chart-department" style="width:100%;height:180px;background:#e8eef6;border-radius:8px;"></canvas>
            </div>
            <div class="card">
                <h2>Tickets par √©tiquette (30 jours)</h2>
                <canvas id="chart-label" style="width:100%;height:180px;background:#e8eef6;border-radius:8px;"></canvas>
            </div>
        </div>
    </main>
</div>
</body>
</html>
